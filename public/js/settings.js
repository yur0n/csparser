(()=>{"use strict";let e,t=document.querySelector("body"),a=document.querySelector(".popup_settings"),n=a.querySelector(".popup__body"),o=a.querySelector(".popup__body .popup__content"),l=document.querySelector("#button-open-settings"),s=a.querySelector(".popup__close"),c=!1,r=document.querySelectorAll("#range-value"),i=document.querySelector('input[name="tg_chat_id"]');function u(e,t,a,n){if(/^\d+$/.test(e.value)){let o=parseInt(e.value);isNaN(o)?(e.value=a,t.value=e.value,d(t)):(o<a?e.value=a:o>n&&(e.value=n),t.value=e.value,d(t))}else e.value=a,t.value=e.value,d(t)}function d(e){let t=Math.round((e.value-e.min)/(e.max-e.min)*100);"stickerOverpay"==e.name?localStorage.setItem("stickerOverpay",t):"minProfit"==e.name&&localStorage.setItem("minProfit",t),e.style.background="linear-gradient(to right, #4554DF 0%, #4554DF "+t+"%, #D9D9D9 "+t+"%, #D9D9D9 100%)"}function v(){let t=document.createElement("div");t.style.overflowY="scroll",t.style.width="50px",t.style.height="50px",document.body.append(t),e=t.offsetWidth-t.clientWidth,t.remove()}i.value=localStorage.getItem("chatId")||"0",i.addEventListener("change",(e=>{localStorage.setItem("chatId",e.target.value)})),l.addEventListener("click",(e=>{e.preventDefault(),t.classList.add("lock"),a.classList.remove("none"),setTimeout((()=>{a.classList.add("_active")}),20),c||(c=!0,s.addEventListener("click",(()=>{t.classList.remove("lock"),a.classList.remove("_active"),setTimeout((()=>{a.classList.add("none")}),700)})),document.addEventListener("click",(function(e){!o.contains(e.target)&&n.contains(e.target)&&(t.classList.remove("lock"),a.classList.remove("_active"),setTimeout((()=>{a.classList.add("none")}),700))})),document.addEventListener("keydown",(function(e){27===e.which&&(t.classList.remove("lock"),a.classList.remove("_active"),setTimeout((()=>{a.classList.add("none")}),700))})))})),r.forEach((e=>{let t=e.closest(".block_range").querySelector("#input-value"),a=e.min,n=e.max;"minProfit"==e.name&&(e.value=localStorage.getItem("minProfit")||1),"stickerOverpay"==e.name&&(e.value=localStorage.getItem("stickerOverpay")||20),t.value=e.value,d(e),e.addEventListener("input",(function(a){t.value=e.value,d(e)})),t.addEventListener("blur",(function(o){u(t,e,a,n)})),t.addEventListener("keypress",(function(o){"Enter"===o.key&&u(t,e,a,n)}))})),v(),document.documentElement.style.setProperty("--scrollbar-width",parseInt(e)),window.addEventListener("resize",(function(t){v(),document.documentElement.style.setProperty("--scrollbar-width",parseInt(e))}))})();