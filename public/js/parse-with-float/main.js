(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("popupBtn"),t=document.querySelector(".window_text .text"),n=document.getElementById("button-run"),a=document.getElementById("button-clear");document.querySelector(".header_button:nth-last-child(2)");let r,o=!1;const i=localforage.createInstance({name:"sideBarFloat"});async function l(){try{let e=await i.keys();if(!e.length)return c({error:"No items in the list"});let n=[];for(let t of e){let e=await i.getItem(t);n.push(e)}const a=localStorage.getItem("chatId");let r=document.createElement("div");r.innerHTML="<h2>Working...</h2>",t.appendChild(r);const o=await fetch("/float-parser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({skins:n,chatId:a})}),l=await o.json();console.log("Response Data:",l),l?.length?(t.innerText="",l.forEach((e=>{e.length&&e.forEach((e=>{const n=document.createElement("div");if(e.wrongName)return n.innerHTML=`<h2>Wrong Name: ${e.wrongName}</h2>\n                            <hr>`,void t.appendChild(n);n.innerHTML=`\n                        <h2>New Item Found!</h2>\n                        <p>Name: ${e.name}</p>\n                        <p>Float: ${e.float}</p>\n                        <p>Price: Â¥${e.price}</p>\n                        <p>Default Price: Â¥${e.defaultPrice}</p>\n                        <a href="${e.link}" target="_blank"><p>ðŸ’°  BUY  ðŸ’°</p></a>\n                        <hr>\n                        `,t.appendChild(n)}))})),t.innerHTML||(t.innerHTML="No data available")):l?.error?c(l):t.innerText=l?.message?l.message:"No data available"}catch(e){console.error("Error fetching data:",e),t.innerText="Failed to fetch data"}o&&(r=setTimeout(l,1e4))}function c(a){e.style.display="block",e.getElementsByTagName("p")[0].innerText=`${a.error}: ${a.url||""}`,o=!1,clearInterval(r),n.querySelector("span").innerText="Run",n.classList.remove("_active"),n.style.pointerEvents="none",setTimeout((()=>n.style.pointerEvents=""),5e3),t.innerText=""}n.addEventListener("click",(async t=>{if(t.preventDefault(),n.classList.contains("_active"))o=!1,clearInterval(r),n.querySelector("span").innerText="Run",n.classList.remove("_active"),n.style.pointerEvents="none",setTimeout((()=>n.style.pointerEvents=""),3e3);else{if(!document.cookie.includes("steam=true"))return e.style.display="block",void(e.getElementsByTagName("p")[0].innerText="Please, link your Steam account");o||(n.querySelector("span").innerText="Off",n.classList.add("_active"),o=!0,l())}})),a.addEventListener("click",(function(e){e.preventDefault(),t.innerText=""}))}))})();